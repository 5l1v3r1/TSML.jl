<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Aggregation · TSML Documentation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TSML Documentation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">HOME</a></li><li><span class="toctext">Tutorial</span><ul><li><a class="toctext" href="../../tutorial/aggregators/">Aggregators and Imputers</a></li><li><a class="toctext" href="../../tutorial/pipeline/">Pipeline</a></li><li><a class="toctext" href="../../tutorial/statistics/">Statistical Metrics</a></li><li><a class="toctext" href="../../tutorial/monotonic/">Monotonic Detection</a></li><li><a class="toctext" href="../../tutorial/tsclassifier/">TS Data Discovery</a></li></ul></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../valueproc/">Value PreProcessing</a></li><li><a class="toctext" href="../dateproc/">Date PreProcessing</a></li><li class="current"><a class="toctext" href>Aggregation</a><ul class="internal"></ul></li><li><a class="toctext" href="../imputation/">Imputation</a></li><li><a class="toctext" href="../monotonic/">Monotonic Detection</a></li><li><a class="toctext" href="../tsclassification/">TS Classification</a></li><li><a class="toctext" href="../cli/">CLI Wrappers</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../../lib/decisiontree/">Decision Tree</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Aggregation</a></li></ul><a class="edit-page" href="https://github.com/IBM/TSML.jl/blob/master/docs/src/man/aggregation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Aggregation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Aggregation-1" href="#Aggregation-1">Aggregation</a></h1><p><code>DateValgator</code> is the type that performs aggregation to minimize noise and lessen the occurrence of missing data. It expects one argument which is the date-time interval to group values by taking  their median. For example, grouping hourly can be carried out by passing this argument: <code>:dateinterval =&gt; Dates.Hour(1)</code></p><p>Let&#39;s start by generating an artificial data with sample frequencey every 5 minutes and print the first 15 rows.</p><pre><code class="language-julia">using Dates, DataFrames
gdate = DateTime(2014,1,1):Dates.Minute(5):DateTime(2014,5,1)
gval = rand(length(gdate))

df = DataFrame(Date=gdate,Value=gval)
first(df,10)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64</th></tr></thead><tbody><p>10 rows × 2 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>0.317564</td></tr><tr><th>2</th><td>2014-01-01T00:05:00</td><td>0.286774</td></tr><tr><th>3</th><td>2014-01-01T00:10:00</td><td>0.702091</td></tr><tr><th>4</th><td>2014-01-01T00:15:00</td><td>0.497805</td></tr><tr><th>5</th><td>2014-01-01T00:20:00</td><td>0.0628874</td></tr><tr><th>6</th><td>2014-01-01T00:25:00</td><td>0.817261</td></tr><tr><th>7</th><td>2014-01-01T00:30:00</td><td>0.412464</td></tr><tr><th>8</th><td>2014-01-01T00:35:00</td><td>0.449599</td></tr><tr><th>9</th><td>2014-01-01T00:40:00</td><td>0.00206474</td></tr><tr><th>10</th><td>2014-01-01T00:45:00</td><td>0.513834</td></tr></tbody></table><p>Let&#39;s apply the aggregator and try hourly, half hourly, and daily aggregates of the data.</p><pre><code class="language-julia">using TSML, TSML.TSMLTransformers, TSML.Utils, TSML.TSMLTypes

hourlyagg = DateValgator(Dict(:dateinterval =&gt; Dates.Hour(1)))
halfhourlyagg = DateValgator(Dict(:dateinterval =&gt; Dates.Minute(30)))
dailyagg = DateValgator(Dict(:dateinterval =&gt; Dates.Day(1)))</code></pre><p>Here&#39;s the first 5 rows of hourly aggregate:</p><pre><code class="language-julia">fit!(hourlyagg,df)
hourlyres = transform!(hourlyagg,df)
first(hourlyres, 5)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64⍰</th></tr></thead><tbody><p>5 rows × 2 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>0.407684</td></tr><tr><th>2</th><td>2014-01-01T01:00:00</td><td>0.481717</td></tr><tr><th>3</th><td>2014-01-01T02:00:00</td><td>0.626427</td></tr><tr><th>4</th><td>2014-01-01T03:00:00</td><td>0.498177</td></tr><tr><th>5</th><td>2014-01-01T04:00:00</td><td>0.285262</td></tr></tbody></table><p>The first 5 rows of half hourly aggregate:</p><pre><code class="language-julia">fit!(halfhourlyagg,df)
halfhourlyres = transform!(halfhourlyagg,df)
first(halfhourlyres, 5)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64⍰</th></tr></thead><tbody><p>5 rows × 2 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>0.317564</td></tr><tr><th>2</th><td>2014-01-01T00:30:00</td><td>0.412464</td></tr><tr><th>3</th><td>2014-01-01T01:00:00</td><td>0.634207</td></tr><tr><th>4</th><td>2014-01-01T01:30:00</td><td>0.576241</td></tr><tr><th>5</th><td>2014-01-01T02:00:00</td><td>0.490236</td></tr></tbody></table><p>The first 5 rows of daily aggregate:</p><pre><code class="language-julia">fit!(dailyagg,df)
dailyres = transform!(dailyagg,df)
first(dailyres, 5)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64⍰</th></tr></thead><tbody><p>5 rows × 2 columns</p><tr><th>1</th><td>2014-01-01T00:00:00</td><td>0.46017</td></tr><tr><th>2</th><td>2014-01-02T00:00:00</td><td>0.503287</td></tr><tr><th>3</th><td>2014-01-03T00:00:00</td><td>0.488554</td></tr><tr><th>4</th><td>2014-01-04T00:00:00</td><td>0.515489</td></tr><tr><th>5</th><td>2014-01-05T00:00:00</td><td>0.496321</td></tr></tbody></table><footer><hr/><a class="previous" href="../dateproc/"><span class="direction">Previous</span><span class="title">Date PreProcessing</span></a><a class="next" href="../imputation/"><span class="direction">Next</span><span class="title">Imputation</span></a></footer></article></body></html>
