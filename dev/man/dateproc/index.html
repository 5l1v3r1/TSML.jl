<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Date PreProcessing · TSML Documentation</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>TSML Documentation</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">HOME</a></li><li><span class="toctext">Tutorial</span><ul><li><a class="toctext" href="../../tutorial/aggregators/">Aggregators and Imputers</a></li><li><a class="toctext" href="../../tutorial/pipeline/">Pipeline</a></li><li><a class="toctext" href="../../tutorial/statistics/">Statistical Metrics</a></li><li><a class="toctext" href="../../tutorial/monotonic/">Monotonic Detection</a></li><li><a class="toctext" href="../../tutorial/tsclassifier/">TS Data Discovery</a></li></ul></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../valueproc/">Value PreProcessing</a></li><li class="current"><a class="toctext" href>Date PreProcessing</a><ul class="internal"></ul></li><li><a class="toctext" href="../aggregation/">Aggregation</a></li><li><a class="toctext" href="../imputation/">Imputation</a></li><li><a class="toctext" href="../monotonic/">Monotonic Detection</a></li><li><a class="toctext" href="../tsclassification/">TS Classification</a></li><li><a class="toctext" href="../cli/">CLI Wrappers</a></li></ul></li><li><span class="toctext">Library</span><ul><li><a class="toctext" href="../../lib/decisiontree/">Decision Tree</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Date PreProcessing</a></li></ul><a class="edit-page" href="https://github.com/IBM/TSML.jl/blob/master/docs/src/man/dateproc.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Date PreProcessing</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Date-Preprocessing-1" href="#Date-Preprocessing-1">Date Preprocessing</a></h1><p>Extracting the Date features in a Date, Value table follows similar workflow with the Value preprocessing in the previous section. The main difference is we are only interested on the date corresponding to the last column of the values generated by the <code>Matrifier</code>. This last column contains the values before  the prediction happens and the dates corresponding to these values carry significant information based on recency compared to the other dates.</p><p>Let us start by creating a Date,Value dataframe similar to the previous section.</p><pre><code class="language-julia">using Dates
using TSML, TSML.Utils, TSML.TSMLTypes
using TSML.TSMLTransformers
using DataFrames

lower = DateTime(2017,1,1)
upper = DateTime(2018,1,31)
dat=lower:Dates.Day(1):upper |&gt; collect
vals = rand(length(dat))
x = DataFrame(Date=dat,Value=vals)
first(x,5)</code></pre><table class="data-frame"><thead><tr><th></th><th>Date</th><th>Value</th></tr><tr><th></th><th>Dates…</th><th>Float64</th></tr></thead><tbody><p>5 rows × 2 columns</p><tr><th>1</th><td>2017-01-01T00:00:00</td><td>0.184567</td></tr><tr><th>2</th><td>2017-01-02T00:00:00</td><td>0.797453</td></tr><tr><th>3</th><td>2017-01-03T00:00:00</td><td>0.385266</td></tr><tr><th>4</th><td>2017-01-04T00:00:00</td><td>0.992998</td></tr><tr><th>5</th><td>2017-01-05T00:00:00</td><td>0.543396</td></tr></tbody></table><p>Let us create an instance of <code>Dateifier</code> passing the size of row, stride, and steps ahead to predict:</p><pre><code class="language-julia">mtr = Dateifier(Dict(:ahead=&gt;24,:size=&gt;24,:stride=&gt;5))
fit!(mtr,x)
res = transform!(mtr,x)
first(res,5)</code></pre><table class="data-frame"><thead><tr><th></th><th>year</th><th>month</th><th>day</th><th>hour</th><th>week</th><th>dow</th><th>doq</th><th>qoy</th></tr><tr><th></th><th>Int64</th><th>Int64</th><th>Int64</th><th>Int64</th><th>Int64</th><th>Int64</th><th>Int64</th><th>Int64</th></tr></thead><tbody><p>5 rows × 8 columns</p><tr><th>1</th><td>2018</td><td>1</td><td>7</td><td>0</td><td>1</td><td>7</td><td>7</td><td>1</td></tr><tr><th>2</th><td>2018</td><td>1</td><td>2</td><td>0</td><td>1</td><td>2</td><td>2</td><td>1</td></tr><tr><th>3</th><td>2017</td><td>12</td><td>28</td><td>0</td><td>52</td><td>4</td><td>89</td><td>4</td></tr><tr><th>4</th><td>2017</td><td>12</td><td>23</td><td>0</td><td>51</td><td>6</td><td>84</td><td>4</td></tr><tr><th>5</th><td>2017</td><td>12</td><td>18</td><td>0</td><td>51</td><td>1</td><td>79</td><td>4</td></tr></tbody></table><p>The output extract automatically several date features such as year, month, day, hour, week, day of the week,  day of quarter, quarter of year.</p><footer><hr/><a class="previous" href="../valueproc/"><span class="direction">Previous</span><span class="title">Value PreProcessing</span></a><a class="next" href="../aggregation/"><span class="direction">Next</span><span class="title">Aggregation</span></a></footer></article></body></html>
